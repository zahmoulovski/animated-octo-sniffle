(window.webpackJsonp=window.webpackJsonp||[]).push([[32,3,18],{340:function(t,e,n){"use strict";n.r(e);n(30),n(67);var r=n(164),o=n(342),c={mixins:[o.e,o.f],props:{item:{type:Object,required:!0}},computed:{poster:function(){return this.item.poster_path?"".concat(r.a,"/w370_and_h556_bestv2").concat(this.item.poster_path):!!this.item.profile_path&&"".concat(r.a,"/w370_and_h556_bestv2").concat(this.item.profile_path)},media:function(){return this.item.media_type?this.item.media_type:this.item.name?"tv":"movie"}}},l=n(16),component=Object(l.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[e("nuxt-link",{staticClass:"card__link",attrs:{to:{name:"".concat(t.media,"-id"),params:{id:t.item.id}}}},[e("div",{staticClass:"card__img"},[t.poster?e("img",{directives:[{name:"lazyload",rawName:"v-lazyload",value:t.poster,expression:"poster"}],staticClass:"lazyload",attrs:{alt:t.name}}):e("span",[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24","fill-rule":"evenodd","clip-rule":"evenodd",fill:"#999"}},[e("path",{attrs:{d:"M24 22h-24v-20h24v20zm-1-19h-22v18h22v-18zm-1 16h-19l4-7.492 3 3.048 5.013-7.556 6.987 12zm-11.848-2.865l-2.91-2.956-2.574 4.821h15.593l-5.303-9.108-4.806 7.243zm-4.652-11.135c1.38 0 2.5 1.12 2.5 2.5s-1.12 2.5-2.5 2.5-2.5-1.12-2.5-2.5 1.12-2.5 2.5-2.5zm0 1c.828 0 1.5.672 1.5 1.5s-.672 1.5-1.5 1.5-1.5-.672-1.5-1.5.672-1.5 1.5-1.5z"}})])])]),t._v(" "),e("h2",{staticClass:"card__name"},[t._v("\n      "+t._s(t.name)+"\n    ")]),t._v(" "),"person"!==t.media&&(t.stars||t.item.vote_average)?e("div",{staticClass:"card__rating"},[t.stars?e("div",{staticClass:"card__stars"},[e("div",{style:{width:"".concat(t.stars,"%")}})]):t._e(),t._v(" "),t.item.vote_average?e("div",{staticClass:"card__vote"},[t._v("\n        "+t._s(t._f("rating")(t.item.vote_average))+"\n      ")]):t._e()]):t._e()])],1)}),[],!1,null,null,null);e.default=component.exports},342:function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return c})),n.d(e,"i",(function(){return l})),n.d(e,"h",(function(){return d})),n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return f})),n.d(e,"g",(function(){return h})),n.d(e,"d",(function(){return _})),n.d(e,"c",(function(){return v}));n(67),n(31),n(123),n(122),n(58),n(30),n(10);var r=n(164),o={computed:{name:function(){return this.item.title?this.item.title:this.item.name}}},c={computed:{stars:function(){if(this.item.vote_average)return 10*this.item.vote_average}}},l={computed:{yearStart:function(){var t=this.item.release_date?this.item.release_date:this.item.first_air_date;if(t)return t.split("-")[0]}}},d={computed:{yearEnd:function(){var t=this.item.last_air_date;if(t)return t.split("-")[0]}}},m={computed:{backdrop:function(){if(this.item.backdrop_path)return"".concat(r.a,"/original").concat(this.item.backdrop_path)}}},f={computed:{cert:function(){if(this.item.release_dates){var t=this.item.release_dates.results.find((function(t){return"GB"===t.iso_3166_1||"US"===t.iso_3166_1}));if(!t)return null;var e=t.release_dates.find((function(t){return""!==t.certification}));if(e)return e.certification}else if(this.item.content_ratings){var n=this.item.content_ratings.results.find((function(t){return"GB"===t.iso_3166_1||"US"===t.iso_3166_1}));return n?n.rating:null}}}},h={computed:{trailer:function(){var t=this.item.videos.results;return t.length&&(t=t.find((function(video){return"Trailer"===video.type})))?[{name:t.name,src:"https://www.youtube.com/embed/".concat(t.key,"?rel=0&showinfo=0&autoplay=1")}]:null}}},_={computed:{directors:function(){var t=this.item.credits.crew;if(t)return t.filter((function(t){return"Director"===t.job})).map((function(t){return'<a href="/person/'.concat(t.id,'">').concat(t.name,"</a>")})).join(", ")}}},v={computed:{creators:function(){var t=this.item.created_by;if(t)return t.map((function(t){return'<a href="/person/'.concat(t.id,'">').concat(t.name,"</a>")})).join(", ")}}}},420:function(t,e,n){"use strict";n.r(e);var r=n(39),o={components:{Card:n(340).default},props:{title:{type:String,required:!1,default:""},items:{type:Object,required:!0},loading:{type:Boolean,required:!1,default:!1}},mounted:function(){window.addEventListener("scroll",this.getScrollPosition)},beforeDestroy:function(){window.removeEventListener("scroll",this.getScrollPosition)},methods:{getScrollPosition:Object(r.a)((function(){this.items.page<this.items.total_pages?window.innerHeight+window.pageYOffset>=document.body.offsetHeight-600&&!this.loading&&this.loadMore():window.removeEventListener("scroll",this.getScrollPosition)}),50),loadMore:function(){this.$emit("loadMore")}}},c=n(16),component=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"listing"},[t.title?e("div",{staticClass:"listing__head"},[t.title?e("h2",{staticClass:"listing__title"},[t._v("\n      "+t._s(t.title)+"\n    ")]):t._e()]):t._e(),t._v(" "),e("div",{staticClass:"listing__items"},t._l(t.items.results,(function(t){return e("Card",{key:"card-".concat(t.id),attrs:{item:t}})})),1),t._v(" "),t.items.page<t.items.total_pages?e("div",{staticClass:"listing__nav"},[t.loading?e("div",[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"44",height:"44",viewBox:"0 0 44 44",stroke:"#2196f3"}},[e("g",{attrs:{fill:"none","fill-rule":"evenodd","stroke-width":"2"}},[e("circle",{attrs:{cx:"22",cy:"22",r:"1"}},[e("animate",{attrs:{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}}),e("animate",{attrs:{attributeName:"stroke-opacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"}})]),e("circle",{attrs:{cx:"22",cy:"22",r:"1"}},[e("animate",{attrs:{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}}),e("animate",{attrs:{attributeName:"stroke-opacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"}})])])])]):t._e()]):t._e()])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Card:n(340).default})},425:function(t,e,n){var content=n(433);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(57).default)("c56d4e86",content,!0,{sourceMap:!1})},432:function(t,e,n){"use strict";n(425)},433:function(t,e,n){var r=n(56)((function(i){return i[1]}));r.push([t.i,".page-search .main{padding-top:6rem}@media(min-width:1200px){.page-search .main{padding-top:8rem}}",""]),r.locals={},t.exports=r},435:function(t,e,n){"use strict";n.r(e);var r=n(11),o=(n(59),n(67),n(164)),c=n(420),l="/",d={components:{SearchResults:c.default},data:function(){return{loading:!1}},head:function(){return{title:"Search",meta:[{hid:"og:title",property:"og:title",content:"Search"},{hid:"og:url",property:"og:url",content:"".concat("http://localhost:2804").concat(this.$route.path)}],bodyAttrs:{class:"page page-search"}}},computed:{query:function(){return this.$route.query.q?this.$route.query.q:""},title:function(){return this.query?"Results For: ".concat(this.query):""}},asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.query,r=t.error,c=t.redirect,e.prev=1,!n.q){e.next=9;break}return e.next=5,Object(o.q)(n.q,1);case 5:return l=e.sent,e.abrupt("return",{items:l});case 9:c("/");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),r({message:"Page not found"});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))()},mounted:function(){this.$store.commit("search/openSearch"),this.$store.commit("search/setFromPage",l)},beforeRouteEnter:function(t,e,n){l=e.path,n()},beforeRouteUpdate:function(t,e,n){n(),this.getResults()},beforeRouteLeave:function(t,e,n){var r=document.getElementById("search");n(),r&&r.value.length&&this.$store.commit("search/closeSearch")},methods:{getResults:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.query.length){e.next=3;break}return t.items=null,e.abrupt("return");case 3:return e.next=5,Object(o.q)(t.query);case 5:if((data=e.sent).total_results){e.next=9;break}return t.items=null,e.abrupt("return");case 9:t.items=data;case 10:case"end":return e.stop()}}),e)})))()},loadMore:function(){var t=this;this.loading=!0,Object(o.q)(this.query,this.items.page+1).then((function(e){t.items.results=t.items.results.concat(e.results),t.items.page=e.page,t.loading=!1})).catch((function(){t.loading=!1}))}}},m=d,f=(n(432),n(16)),component=Object(f.a)(m,(function(){var t=this,e=t._self._c;return e("main",{staticClass:"main"},[t.items&&t.items.results.length?e("SearchResults",{attrs:{title:t.title,items:t.items,loading:t.loading},on:{loadMore:t.loadMore}}):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{SearchResults:n(420).default})}}]);